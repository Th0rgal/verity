# Safe Multisig Base Proof Plan (Scaffold)

Goal: formally prove the latest Safe base contract from safe-smart-account, and
ensure generated bytecode matches the Solidity implementation.

## Current Scaffold
- EDSL placeholder: `DumbContracts/Examples/SafeMultisigBase.lean`
- Contract specs: `DumbContracts/Specs/SafeMultisigBase/Spec.lean`
- Invariants: `DumbContracts/Specs/SafeMultisigBase/Invariants.lean`
- EDSL proofs: `DumbContracts/Proofs/SafeMultisigBase/*`
- Compiler spec placeholder: `Compiler/Specs/SafeMultisigBase.lean`
- Spec correctness placeholder: `Compiler/Proofs/SpecCorrectness/SafeMultisigBase.lean`

## Next Steps
1. Pin the upstream Safe version and copy the base contract source into
   `docs/safe-multisig-base/source/` (or another agreed location).
2. Define the exact storage layout and ABI for the base contract.
3. Implement the base contract in the DumbContracts EDSL.
4. Write ContractSpec that mirrors the EDSL and Solidity behavior.
5. Prove EDSL semantics match ContractSpec (Layer 1).
6. Prove ContractSpec -> IR -> Yul preservation (Layers 2 and 3).
7. Compare produced bytecode with the Solidity compiler output and
   adjust the compiler if needed to ensure identical output.

## Notes
- Keep the EDSL spec human-readable and minimal.
- Prefer small, composable lemmas for ownership + threshold invariants.
- Document any trust assumptions explicitly.
