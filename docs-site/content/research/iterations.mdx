---
title: Iteration Summaries
description: Development history across 8 iterations
---

# Iteration Summaries

The project was built in 8 iterations. The first 7 added contracts and, when needed, extended the core. The 8th focused on verification infrastructure.

This page is the detailed iteration log and the only place for milestone-style progress notes.

## Iteration 7: SimpleToken

Combined Owned and Ledger patterns into a token contract with owner-controlled minting, public transfers, and supply tracking. No core changes needed.

- Core: unchanged

## Iteration 6: Mapping Support

Added `storageMap` field to `ContractState` for key-value storage (`Address -> Uint256`). Ledger example demonstrates deposit, withdraw, and transfer with balance guards.

- Core: mapping support added

## Iteration 5: Math Safety Stdlib

Added `Stdlib/Math.lean` with `safeAdd`, `safeSub`, `safeMul`, `safeDiv`. SafeCounter example uses checked arithmetic instead of bare `+`/`-`. Core unchanged.

- Core: unchanged
- Stdlib/Math: added safe arithmetic helpers

## Iteration 4: OwnedCounter

Combined Owned and Counter patterns. Increment/decrement require ownership. No core changes needed.

- Core: unchanged

## Iteration 3: Owned

Added `storageAddr` field to `ContractState` for Address storage. Owned example implements `onlyOwner` guard and `transferOwnership`.

- Core: address storage added

## Iteration 2: Counter

Increment/decrement with read-modify-write pattern. No core changes needed. Raised the question of arithmetic safety (Lean `Nat` subtraction saturates at 0, Solidity 0.8+ reverts).

- Core: unchanged

## Iteration 1: Bootstrap

Initial core with `ContractState`, `StorageSlot`, `getStorage`/`setStorage`, `msgSender`, `require`. SimpleStorage example.

- Core: initial core

## Core growth

| Iteration | Change summary | What was added |
|-----------|----------------|----------------|
| 1 (Bootstrap) | New core | ContractState, storage access, msgSender, require |
| 2 (Counter) | No change | Nothing needed |
| 3 (Owned) | Extended core | Address storage |
| 4 (OwnedCounter) | No change | Nothing needed |
| 5 (SafeCounter) | Cleanup | Safer arithmetic helpers in stdlib |
| 6 (Ledger) | Extended core | Mapping storage |
| 7 (SimpleToken) | No change | Nothing needed |
| 8 (Verification) | Extended core | ContractResult, bind, simp lemmas, EVM context |

4 out of the 7 implementation iterations needed no core changes. The verification iteration added infrastructure for proofs, not new contract primitives.

## Source

See the [Research Log](/research) for detailed notes on each iteration, including failed approaches and design decisions.
